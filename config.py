# config.py

# -----------------------------
# Геометрия и базовые настройки
# -----------------------------
WORLD_WIDTH = 100.0
WORLD_HEIGHT = 100.0

# Точка укрытия по умолчанию (fallback).
# server.py установит SAFE_POINT = координатам костра, если он есть в деревне.
SAFE_POINT = (10.0, 90.0)

# Максимальная скорость агента (пикселей / тик)
AGENT_MAX_SPEED = 1.0

# Дополнительный радиус восприятия поверх радиуса объекта
PERCEPTION_RADIUS = 5.0

# Частота симуляции (тиков в секунду)
TICK_RATE_HZ = 5.0


# ------------------------------------
# Навыки / Дообучение в онлайне (policy)
# ------------------------------------
# Если True — на каждом тике мир вызывает brain.policy_learn_online()
LIVE_SKILL_LEARNING = True

# Сколько шагов обучения выполнять на тик (на агента)
LIVE_SKILL_LEARNING_STEPS = 1


# -----------------------------
# Безопасность API (необязательно)
# -----------------------------
# Если строка непустая — REST-ручки, помеченные Depends(_require_token),
# потребуют заголовок: x-api-key: <этот_токен>
API_TOKEN = ""  # например: "secret-123"; пусто = проверка отключена


# -----------------------------
# Поиск целей / семплирование
# -----------------------------
BASE_GOAL_SAMPLES = 32
MAX_GOAL_SAMPLES  = 120


# -----------------------------
# Боёвка агентов и зверей
# -----------------------------
# Включить ответные действия агентов (удар/уклонение/бегство).
AGENT_FIGHTBACK_ENABLED = True

# Ближний бой агента
AGENT_BASE_ATTACK_POWER = 8.0     # средний урон агента кулаком/палкой
AGENT_MELEE_RANGE = 1.6           # радиус ближнего боя агента
AGENT_ATTACK_COOLDOWN = 18        # тиков между ударами

# Порог страха: если ниже — допускаем драку (иначе чаще бежим/уклоняемся)
AGENT_FEAR_FIGHT_THRESHOLD = 0.65

# Социальные эффекты в бою
ALLY_HELP_RADIUS = 4.0            # кто считается «рядом» для прибавки смелости
PETS_DEFEND_OWNER = True          # приручённые бьют обидчика хозяина

# Параметры укуса животных
ANIMAL_BITE_RANGE = 1.4           # радиус укуса зверя

# Политика ε-greedy для надстройки CombatSystem (server.py)
COMBAT_THREAT_RADIUS = 6.0        # радиус, в котором считаем угрозу активной
COMBAT_EPSILON = 0.20             # вероятность случайного действия (исследование)
COMBAT_ALPHA = 0.35               # скорость обучения (Q-learning)
COMBAT_GAMMA = 0.90               # дисконт будущей награды
